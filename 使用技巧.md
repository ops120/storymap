# 众生谱使用技巧 v1.0

**作者：你们喜爱的老王**

---

## 🎯 布局调整技巧

### 快速调整布局

1. **鼠标悬停**：将鼠标移到两个区域之间的分隔线上
2. **观察光标**：光标会变成 `↔` 形状
3. **拖拽调整**：按住鼠标左键并左右拖动
4. **释放完成**：释放鼠标完成调整

### 推荐布局方案

#### 方案1：专注输入（适合大量文本输入）
```
┌─────┬──────────────┬────────────┐
│ 200 │     600      │    剩余    │
│卷宗 │   控制台     │   图谱     │
└─────┴──────────────┴────────────┘
```
- 左侧：200px（最小）
- 中间：600px（最大）
- 右侧：自适应

#### 方案2：专注图谱（适合查看复杂关系）
```
┌─────┬────────┬──────────────────┐
│ 200 │  300   │      剩余        │
│卷宗 │控制台  │      图谱        │
└─────┴────────┴──────────────────┘
```
- 左侧：200px（最小）
- 中间：300px（最小）
- 右侧：最大化

#### 方案3：平衡布局（默认，适合大多数情况）
```
┌──────┬──────────┬──────────────┐
│ 280  │   400    │    剩余      │
│卷宗  │ 控制台   │    图谱      │
└──────┴──────────┴──────────────┘
```
- 左侧：280px（默认）
- 中间：400px（默认）
- 右侧：自适应

---

## 📝 文本输入技巧

### 1. 最佳文本长度

- **最小**：500 字（确保有足够的人物信息）
- **推荐**：1000-2000 字（最佳分析效果）
- **最大**：系统会自动分块处理，默认每块 500 字

### 2. 文本质量

**好的文本示例：**
```
韩立与李化元在黄枫谷相遇。李化元是韩立的师父，
传授他修炼之法。后来韩立结识了南宫婉，两人成为道侣。
韩立与墨大夫曾是好友，但后来反目成仇...
```

**不好的文本示例：**
```
今天天气很好。他走在路上。看到了一些东西。
```

### 3. 输入方式

- **粘贴文本**：直接复制粘贴到输入框
- **导入文件**：点击"导入文本"按钮上传 .txt 文件
- **自动编码**：系统自动检测 UTF-8、UTF-16、GBK 编码

### 4. 切片设置

- **默认大小**：500 字/块
- **调整范围**：100-5000 字
- **调整方法**：在输入框上方的数字输入框中修改
- **自动保存**：切片设置会自动持久化

### 5. 快捷操作

- **回车创建项目**：在新建卷宗输入框中按回车键
- **自动清空**：点击"开始炼化"后自动清空输入框
- **字数统计**：实时显示在输入框下方（如有）

---

## 🔮 LLM 模型配置技巧

### 1. 选择合适的模型

| 场景 | 推荐模型 | 原因 |
|------|----------|------|
| 日常使用 | qwen-plus | 性价比高，效果好 |
| 快速测试 | qwen-turbo | 速度快，成本低 |
| 高质量分析 | qwen-max, gpt-4 | 准确率最高 |
| 长文本 | qwen-long | 支持超长上下文 |

### 2. 配置多个模型

建议配置 2-3 个模型：
1. **主力模型**：日常使用（如 qwen-plus）
2. **备用模型**：主力失败时切换（如 qwen-turbo）
3. **高级模型**：重要分析时使用（如 gpt-4）

### 3. 测试连接

添加模型后务必测试：
1. 点击"🧪 测试连接"
2. 等待响应
3. 看到"✅ 连接成功"再保存

---

## 📊 图谱查看技巧

### 1. 基本操作

- **移动画布**：按住鼠标左键拖拽
- **缩放视图**：滚动鼠标滚轮
- **移动节点**：拖拽单个节点
- **查看关系**：关系标签显示在连线上

### 2. 优化显示

如果节点重叠：
1. 拖拽节点到合适位置
2. 缩小视图查看全局
3. 放大视图查看细节

### 3. 数据统计

顶部信息栏实时显示：
- 节点数量（人物数量）
- 关系数量（关系总数）

---

## 💾 数据管理技巧

### 1. 定期备份

建议每周导出一次：
1. 选择要备份的卷宗
2. 点击"📤 导出卷宗"
3. 保存 JSON 文件到安全位置

### 2. 文件命名

导出文件会自动使用卷宗名称：
```
凡人修仙传.json
斗破苍穹.json
```

### 3. 导入数据

1. 点击"📥 导入卷宗"
2. 选择 JSON 文件
3. 系统自动创建新卷宗并导入数据

### 4. 卷宗管理

- **重命名**：点击卷宗旁的 ✏️ 按钮
- **删除**：点击卷宗旁的 🗑️ 按钮（需确认）
- **清理重复**：点击"🧹 清理重复"按钮自动合并重复节点

### 5. 数据清理

定期清理重复节点：
1. 点击"🧹 清理重复"按钮
2. 系统自动检测同名节点
3. 合并重复节点并更新关系
4. 删除孤立的边

---

## 🚀 性能优化技巧

### 1. 分批处理

如果文本很长（>5000 字）：
1. 分成多个部分
2. 分别进行炼化
3. 系统会自动合并结果

### 2. 避免重复分析

- 不要重复分析相同的文本
- 系统会自动去重，但仍会消耗 API 调用

### 3. 清理无用数据

定期删除不需要的卷宗：
1. 导出备份（如需要）
2. 删除数据库中的项目
3. 释放存储空间

---

## 🐛 常见问题解决

### 问题1：图谱不显示

**解决方案：**
1. 按 F12 打开控制台
2. 查看是否有错误信息
3. 刷新页面（Ctrl + Shift + R）
4. 重新选择卷宗
5. 检查是否有节点数据

### 问题2：炼化失败

**解决方案：**
1. 检查 LLM 模型是否选择
2. 测试模型连接是否正常
3. 查看后端日志
4. 开启 Debug 模式查看详细信息
5. 尝试使用其他模型

### 问题3：导入失败

**解决方案：**
1. 检查 JSON 文件格式
2. 确保文件是从本系统导出的
3. 查看浏览器控制台错误
4. 尝试重新导出原文件

### 问题4：出现重复节点

**解决方案：**
1. 点击"🧹 清理重复"按钮
2. 系统会自动合并同名节点
3. 优化系统提示词，强调 ID 一致性
4. 使用 Debug 模式检查 AI 输出

### 问题5：文本导入乱码

**解决方案：**
1. 系统会自动尝试多种编码（UTF-8、UTF-16、GBK）
2. 如仍有问题，尝试转换文件编码为 UTF-8
3. 或直接粘贴文本内容

### 问题6：关系未合并

**解决方案：**
1. 确认是同一对人物（source 和 target 相同）
2. 检查节点 ID 是否一致
3. 使用"清理重复"功能
4. 查看 Debug 日志确认关系数据

### 问题7：布局调整失效

**解决方案：**
1. 确保鼠标在分隔线上（光标变为 ↔）
2. 检查是否达到最小宽度限制
3. 刷新页面重新加载
4. 清除浏览器缓存

---

## 💡 高级技巧

### 1. 自定义系统提示词

在配置面板中可以修改系统提示词：
```
你是一个专业的小说关系分析提取器...
```

可以根据需要调整：
- 增加示例
- 强调特定关系类型
- 调整输出格式
- 明确 ID 命名规则

### 2. Debug 模式使用

开启 Debug 模式后：
1. 查看控制台日志
2. 检查发送给 AI 的提示词
3. 查看 AI 的原始响应
4. 分析切片内容和大小
5. 排查分析失败原因

### 3. 批量处理

如果有多个章节：
1. 创建一个卷宗
2. 逐个粘贴章节内容
3. 依次炼化
4. 系统自动合并所有结果
5. 使用"清理重复"去除重复节点

### 4. 多卷宗管理

为不同的小说创建独立卷宗：
- 便于管理
- 数据隔离
- 快速切换
- 独立备份

### 5. 关系演变追踪

系统会自动合并关系演变：
- 第一次：A 与 B 是同学
- 第二次：A 与 B 是恋人
- 结果：A → B: "同学 → 恋人"
- 视觉：红色粗线显示

### 6. 切片大小优化

根据文本类型调整：
- **对话密集**：300-500 字
- **描述性文本**：800-1500 字
- **混合内容**：500-800 字（默认）
- **长篇章节**：1000-2000 字

---

## 🎨 界面个性化

### 1. 调整布局

根据屏幕大小和使用习惯：
- 小屏幕：缩小左侧和中间
- 大屏幕：适当增加各区域宽度
- 专注模式：最大化需要的区域

### 2. 浏览器缩放

如果文字太小或太大：
- 放大：Ctrl + `+`
- 缩小：Ctrl + `-`
- 重置：Ctrl + `0`

---

## 📈 效率提升

### 1. 快捷键

- **F12**：打开开发者工具
- **Ctrl + Shift + R**：强制刷新
- **回车**：快速创建卷宗

### 2. 工作流程

推荐的工作流程：
1. 创建卷宗
2. 配置 LLM 模型
3. 测试连接
4. 输入文本
5. 开始炼化
6. 查看图谱
7. 导出备份

### 3. 批量操作

如果需要分析多部小说：
1. 为每部小说创建卷宗
2. 配置好 LLM 模型
3. 依次切换卷宗进行分析
4. 定期导出备份

---

## 🎯 最佳实践

### 1. 命名规范

- 卷宗名称：使用小说名称
- 导出文件：保持默认命名
- 备份文件夹：按日期组织

### 2. 数据安全

- 定期导出备份
- 多地保存备份文件
- 重要数据云端备份

### 3. 性能优化

- 不要同时打开多个卷宗
- 定期清理浏览器缓存
- 关闭不必要的浏览器标签

---

## 🎊 总结

掌握这些技巧，你就能高效使用众生谱了：

1. ✅ 灵活调整布局
2. ✅ 优化文本输入（粘贴或导入）
3. ✅ 配置多个模型
4. ✅ 高效查看图谱
5. ✅ 安全管理数据
6. ✅ 及时清理重复
7. ✅ 追踪关系演变
8. ✅ 使用 Debug 模式
9. ✅ 解决常见问题
10. ✅ 提升使用效率

开始你的叙事分析之旅吧！🚀

---

## 📚 相关文档

- [README.md](README.md) - 项目说明和快速开始
- [功能说明.md](功能说明.md) - 详细功能介绍
- [安装指南.md](安装指南.md) - 完整安装步骤
- [快速参考.md](快速参考.md) - 常用命令速查
- [项目结构.md](项目结构.md) - 代码结构说明
- [CHANGELOG-v1.0.md](CHANGELOG-v1.0.md) - v1.0 版本详情

---

**众生谱 v1.0 - 让人物关系一目了然** 🎉  
**作者：你们喜爱的老王**
