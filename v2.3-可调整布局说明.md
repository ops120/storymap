# v2.3 可调整布局说明

## 🎯 新功能：可拖拽调整的三栏布局

现在你可以自由调整三个区域的宽度，让界面更加灵活和个性化！

---

## ✨ 功能特点

### 1. 可拖拽调整

三个区域之间有可拖拽的分隔条，鼠标悬停时会显示：

```
┌──────────┬──────────────┬──────────────────────────────┐
│          │              │                              │
│  左侧    │  中间        │        右侧                  │
│  卷宗    │  控制台      │        图谱                  │
│          │              │                              │
│          ⋮              ⋮                              │
│          │              │                              │
└──────────┴──────────────┴──────────────────────────────┘
           ↑              ↑
        拖拽条1        拖拽条2
```

### 2. 宽度限制

为了保证使用体验，每个区域都有最小和最大宽度限制：

| 区域 | 最小宽度 | 最大宽度 | 默认宽度 |
|------|----------|----------|----------|
| 左侧（卷宗） | 200px | 400px | 280px |
| 中间（控制台） | 300px | 600px | 400px |
| 右侧（图谱） | 自适应 | 无限制 | 剩余空间 |

### 3. 视觉反馈

- **悬停效果**：鼠标悬停在分隔条上时，显示灰色背景
- **拖拽状态**：拖拽时分隔条变为紫色，并显示拖拽图标
- **平滑过渡**：所有颜色变化都有平滑的过渡动画

---

## 🎮 使用方法

### 调整左侧卷宗区域宽度

1. 将鼠标移动到左侧和中间区域之间的分隔线
2. 鼠标会变成 `↔` 形状
3. 按住鼠标左键并左右拖动
4. 释放鼠标完成调整

### 调整中间控制台区域宽度

1. 将鼠标移动到中间和右侧区域之间的分隔线
2. 鼠标会变成 `↔` 形状
3. 按住鼠标左键并左右拖动
4. 释放鼠标完成调整

### 重置布局

刷新页面即可恢复默认布局：
- 左侧：280px
- 中间：400px
- 右侧：自适应

---

## 🔧 技术实现

### 核心组件：ResizableLayout

新增的 `ResizableLayout.jsx` 组件负责处理布局调整：

```javascript
<ResizableLayout
  left={/* 左侧内容 */}
  middle={/* 中间内容 */}
  right={/* 右侧内容 */}
/>
```

### 拖拽逻辑

1. **监听鼠标按下**：在分隔条上按下鼠标时，开始拖拽
2. **监听鼠标移动**：拖拽时实时计算新的宽度
3. **监听鼠标释放**：释放鼠标时结束拖拽
4. **宽度限制**：确保宽度在允许范围内

### 状态管理

使用 React Hooks 管理拖拽状态：

```javascript
const [leftWidth, setLeftWidth] = useState(280);
const [middleWidth, setMiddleWidth] = useState(400);
const [isDraggingLeft, setIsDraggingLeft] = useState(false);
const [isDraggingRight, setIsDraggingRight] = useState(false);
```

---

## 🎨 视觉设计

### 分隔条样式

**默认状态：**
- 宽度：4px
- 背景：透明
- 光标：`col-resize`

**悬停状态：**
- 背景：#e8e8e8（浅灰色）
- 显示拖拽图标

**拖拽状态：**
- 背景：#667eea（紫色）
- 拖拽图标保持显示
- 全局光标变为 `col-resize`
- 禁用文本选择

### 拖拽图标

```
┌────┐
│ ⋮  │  ← 三个点的图标
└────┘
```

- 位置：分隔条中央
- 大小：20x40px
- 背景：灰色/紫色
- 圆角：4px
- 默认隐藏，悬停时显示

---

## 💡 使用场景

### 场景1：专注于文本输入

如果你需要输入大量文本：
1. 将中间控制台区域拉宽（最大 600px）
2. 缩小左侧卷宗区域（最小 200px）
3. 右侧图谱区域自动调整

### 场景2：专注于图谱查看

如果你需要查看复杂的关系图谱：
1. 缩小左侧和中间区域到最小
2. 右侧图谱区域获得最大空间
3. 更好地查看节点和关系

### 场景3：平衡布局

默认布局已经是平衡的：
- 左侧：280px（适合显示项目列表）
- 中间：400px（适合输入文本）
- 右侧：剩余空间（适合显示图谱）

---

## 🐛 已知限制

### 1. 宽度限制

- 左侧最小 200px，最大 400px
- 中间最小 300px，最大 600px
- 如果窗口太小，可能无法调整到理想宽度

### 2. 不支持保存

- 刷新页面后恢复默认布局
- 未来版本可能会添加布局保存功能

### 3. 移动端不支持

- 拖拽功能仅在桌面端可用
- 移动端使用固定布局

---

## 🔄 与之前版本的对比

| 特性 | v2.2 | v2.3 | 改进 |
|------|------|------|------|
| 左侧宽度 | 固定 280px | 200-400px 可调 | ⭐⭐⭐⭐⭐ |
| 中间宽度 | 固定 400px | 300-600px 可调 | ⭐⭐⭐⭐⭐ |
| 右侧宽度 | 自适应 | 自适应 | - |
| 用户体验 | 一般 | 灵活 | ⭐⭐⭐⭐⭐ |
| 个性化 | 无 | 高 | ⭐⭐⭐⭐⭐ |

---

## 📊 性能优化

### 1. 防抖处理

拖拽时使用 `requestAnimationFrame` 优化性能，避免频繁重绘。

### 2. 事件清理

组件卸载时自动清理事件监听器，防止内存泄漏。

### 3. 条件渲染

只在拖拽时添加全局事件监听器，减少性能开销。

---

## 🎯 未来计划

### v2.4 可能包含：

- [ ] 保存布局设置到 LocalStorage
- [ ] 双击分隔条重置为默认宽度
- [ ] 预设布局方案（紧凑、标准、宽松）
- [ ] 垂直方向的可调整布局
- [ ] 移动端适配

---

## 📝 使用建议

### 1. 根据屏幕大小调整

- **小屏幕（<1366px）**：使用默认布局或缩小左侧
- **中等屏幕（1366-1920px）**：默认布局最佳
- **大屏幕（>1920px）**：可以适当增加各区域宽度

### 2. 根据任务调整

- **输入文本**：增加中间区域宽度
- **查看图谱**：增加右侧区域宽度
- **管理项目**：增加左侧区域宽度

### 3. 保持平衡

不要将某个区域调整得过小或过大，保持界面的平衡感。

---

## 🎊 总结

v2.3 版本带来了更加灵活的布局系统：

1. ✅ 可拖拽调整三个区域的宽度
2. ✅ 合理的宽度限制
3. ✅ 流畅的视觉反馈
4. ✅ 简单易用的交互
5. ✅ 更好的个性化体验

现在你可以根据自己的需求自由调整布局了！🚀

---

## 💬 反馈

如果你有任何建议或问题，欢迎反馈：

- 是否需要保存布局设置？
- 是否需要更多预设布局？
- 是否需要调整宽度限制？
- 是否需要其他功能？
